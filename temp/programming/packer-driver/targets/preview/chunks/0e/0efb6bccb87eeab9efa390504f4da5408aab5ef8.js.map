{"version":3,"sources":["file:///Users/hanchuang/Games/RotateBlock/assets/src/Block.ts"],"names":["_decorator","Component","instantiate","NodeEventType","Prefab","UIOpacity","UITransform","Vec3","BlockEnum","ccclass","property","Block","type","rotation","grids","start","node","on","TOUCH_START","touchStart","data","getRotation","getComponent","width","height","console","log","i","length","GridPrefab","x","y","Math","floor","setPosition","addChild","opacity","push","event","off","TOUCH_CANCEL","TOUCH_MOVE","TOUCH_END","touchMove","touchEnd","touchCancel","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,a,OAAAA,a;AAAeC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;;AACzFC,MAAAA,S,iBAAAA,S;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;uBAGjBW,K,WADZF,OAAO,CAAC,OAAD,C,UAOHC,QAAQ,CAAC;AACNE,QAAAA,IAAI,EAAER;AADA,OAAD,C,2BAPb,MACaO,KADb,SAC2BV,SAD3B,CACqC;AAAA;AAAA;AAAA,eAGjCW,IAHiC,GAG1B,CAH0B;AAAA,eAIjCC,QAJiC,GAItB,CAJsB;;AAAA;;AAAA,eAWjCC,KAXiC,GAWzB,EAXyB;AAAA;;AAcjCC,QAAAA,KAAK,GAAG;AACJ,eAAKC,IAAL,CAAUC,EAAV,CAAad,aAAa,CAACe,WAA3B,EAAwC,KAAKC,UAA7C,EAAyD,IAAzD;AAEA,cAAIC,IAAI,GAAG;AAAA;AAAA,sCAAUC,WAAV,CAAsB,KAAKT,IAA3B,EAAiC,KAAKC,QAAtC,CAAX;AAEA,eAAKG,IAAL,CAAUM,YAAV,CAAuBhB,WAAvB,EAAoCiB,KAApC,GAA4C,KAAK,CAAjD;AACA,eAAKP,IAAL,CAAUM,YAAV,CAAuBhB,WAAvB,EAAoCkB,MAApC,GAA6C,KAAK,CAAlD;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAYN,IAAZ;;AAEA,eAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,IAAI,CAACQ,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AAClC,gBAAIX,IAAI,GAAGd,WAAW,CAAC,KAAK2B,UAAN,CAAtB;AACA,gBAAIC,CAAC,GAAIV,IAAI,CAACO,CAAD,CAAJ,GAAU,CAAX,GAAgB,EAAhB,GAAqB,EAA7B;AACA,gBAAII,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWb,IAAI,CAACO,CAAD,CAAJ,GAAU,CAArB,IAA0B,EAA1B,GAA+B,EAAvC;AACAX,YAAAA,IAAI,CAACkB,WAAL,CAAiB,IAAI3B,IAAJ,CAASuB,CAAT,EAAYC,CAAZ,EAAe,CAAf,CAAjB;AACA,iBAAKf,IAAL,CAAUmB,QAAV,CAAmBnB,IAAnB;AACAA,YAAAA,IAAI,CAACM,YAAL,CAAkBjB,SAAlB,EAA6B+B,OAA7B,GAAuC,GAAvC;AACA,iBAAKtB,KAAL,CAAWuB,IAAX,CAAgBrB,IAAhB;AACH;AAEJ;;AAEMG,QAAAA,UAAU,CAACmB,KAAD,EAAQ;AACrB,eAAKtB,IAAL,CAAUuB,GAAV,CAAcpC,aAAa,CAACe,WAA5B,EAAyC,KAAKC,UAA9C,EAA0D,IAA1D;AACA,eAAKH,IAAL,CAAUC,EAAV,CAAad,aAAa,CAACqC,YAA3B,EAAyC,KAAKrB,UAA9C,EAA0D,IAA1D;AACA,eAAKH,IAAL,CAAUC,EAAV,CAAad,aAAa,CAACsC,UAA3B,EAAuC,KAAKtB,UAA5C,EAAwD,IAAxD;AACA,eAAKH,IAAL,CAAUC,EAAV,CAAad,aAAa,CAACuC,SAA3B,EAAsC,KAAKvB,UAA3C,EAAuD,IAAvD;AACH;;AAEMwB,QAAAA,SAAS,CAACL,KAAD,EAAQ;AACpBb,UAAAA,OAAO,CAACC,GAAR,CAAYY,KAAZ;AACA,eAAKtB,IAAL,CAAUkB,WAAV,CAAsB,IAAI3B,IAAJ,EAAtB;AAEH;;AAEMqC,QAAAA,QAAQ,CAACN,KAAD,EAAQ;AACnB,eAAKtB,IAAL,CAAUC,EAAV,CAAad,aAAa,CAACe,WAA3B,EAAwC,KAAKC,UAA7C,EAAyD,IAAzD;AACA,eAAKH,IAAL,CAAUuB,GAAV,CAAcpC,aAAa,CAACqC,YAA5B,EAA0C,KAAKrB,UAA/C,EAA2D,IAA3D;AACA,eAAKH,IAAL,CAAUuB,GAAV,CAAcpC,aAAa,CAACsC,UAA5B,EAAwC,KAAKtB,UAA7C,EAAyD,IAAzD;AACA,eAAKH,IAAL,CAAUuB,GAAV,CAAcpC,aAAa,CAACuC,SAA5B,EAAuC,KAAKvB,UAA5C,EAAwD,IAAxD;AACH;;AAEM0B,QAAAA,WAAW,CAACP,KAAD,EAAQ;AACtB,eAAKtB,IAAL,CAAUC,EAAV,CAAad,aAAa,CAACe,WAA3B,EAAwC,KAAKC,UAA7C,EAAyD,IAAzD;AACA,eAAKH,IAAL,CAAUuB,GAAV,CAAcpC,aAAa,CAACqC,YAA5B,EAA0C,KAAKrB,UAA/C,EAA2D,IAA3D;AACA,eAAKH,IAAL,CAAUuB,GAAV,CAAcpC,aAAa,CAACsC,UAA5B,EAAwC,KAAKtB,UAA7C,EAAyD,IAAzD;AACA,eAAKH,IAAL,CAAUuB,GAAV,CAAcpC,aAAa,CAACuC,SAA5B,EAAuC,KAAKvB,UAA5C,EAAwD,IAAxD;AACH;;AAED2B,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAhEgC,O","sourcesContent":["import { _decorator, Component, instantiate, Node, NodeEventType, Prefab, UIOpacity, UITransform, Vec3 } from 'cc';\nimport { BlockEnum } from './BlockEnum';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Block')\nexport class Block extends Component {\n\n\n    type = 1;\n    rotation = 0;\n\n    @property({\n        type: Prefab,\n    })\n    GridPrefab: Prefab;\n\n    grids = [];\n\n\n    start() {\n        this.node.on(NodeEventType.TOUCH_START, this.touchStart, this);\n\n        let data = BlockEnum.getRotation(this.type, this.rotation);\n\n        this.node.getComponent(UITransform).width = 80 * 2;\n        this.node.getComponent(UITransform).height = 80 * 2;\n        console.log(data);\n\n        for (let i = 0; i < data.length; i++) {\n            let node = instantiate(this.GridPrefab);\n            let x = (data[i] % 8) * 80 + 40;\n            let y = Math.floor(data[i] / 8) * 80 + 40;\n            node.setPosition(new Vec3(x, y, 0));\n            this.node.addChild(node);\n            node.getComponent(UIOpacity).opacity = 255;\n            this.grids.push(node);\n        }\n\n    }\n\n    public touchStart(event) {\n        this.node.off(NodeEventType.TOUCH_START, this.touchStart, this);\n        this.node.on(NodeEventType.TOUCH_CANCEL, this.touchStart, this);\n        this.node.on(NodeEventType.TOUCH_MOVE, this.touchStart, this);\n        this.node.on(NodeEventType.TOUCH_END, this.touchStart, this);\n    }\n\n    public touchMove(event) {\n        console.log(event);\n        this.node.setPosition(new Vec3())\n\n    }\n\n    public touchEnd(event) {\n        this.node.on(NodeEventType.TOUCH_START, this.touchStart, this);\n        this.node.off(NodeEventType.TOUCH_CANCEL, this.touchStart, this);\n        this.node.off(NodeEventType.TOUCH_MOVE, this.touchStart, this);\n        this.node.off(NodeEventType.TOUCH_END, this.touchStart, this);\n    }\n\n    public touchCancel(event) {\n        this.node.on(NodeEventType.TOUCH_START, this.touchStart, this);\n        this.node.off(NodeEventType.TOUCH_CANCEL, this.touchStart, this);\n        this.node.off(NodeEventType.TOUCH_MOVE, this.touchStart, this);\n        this.node.off(NodeEventType.TOUCH_END, this.touchStart, this);\n    }\n\n    update(deltaTime: number) {\n\n    }\n}\n\n"]}