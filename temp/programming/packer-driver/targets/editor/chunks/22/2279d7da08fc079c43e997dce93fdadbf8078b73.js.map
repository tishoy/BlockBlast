{"version":3,"sources":["file:///Users/hanchuang/Games/RotateBlock/assets/src/Block.ts"],"names":["_decorator","Component","instantiate","NodeEventType","Prefab","UIOpacity","Vec3","BlockEnum","ccclass","property","Block","type","rotation","grids","start","node","on","TOUCH_START","touchStart","data","getRotation","i","length","GridPrefab","x","y","Math","floor","setPosition","getComponent","opacity","push","event","off","TOUCH_CANCEL","TOUCH_MOVE","TOUCH_END","touchMove","console","log","touchEnd","touchCancel","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Node, NodeEventType, Prefab, UIOpacity, Vec3 } from 'cc';\nimport { BlockEnum } from './BlockEnum';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Block')\nexport class Block extends Component {\n\n\n    type = 1;\n    rotation = 0;\n\n    @property({\n        type: Prefab,\n    })\n    GridPrefab: Prefab;\n\n    grids = [];\n\n\n    start() {\n        this.node.on(NodeEventType.TOUCH_START, this.touchStart, this);\n\n        let data = BlockEnum.getRotation(this.type, this.rotation);\n\n        for (let i = 0; i < data.length; i++) {\n            let node = instantiate(this.GridPrefab);\n            let x = (data[i] % 8) * 80 - 320 + 40;\n            let y = Math.floor(data[i] / 8) * 80 - 320 + 40;\n            node.setPosition(new Vec3(x, y, 0));\n            node.getComponent(UIOpacity).opacity = 255;\n            this.grids.push(node);\n        }\n\n    }\n\n    public touchStart(event) {\n        this.node.off(NodeEventType.TOUCH_START, this.touchStart, this);\n        this.node.on(NodeEventType.TOUCH_CANCEL, this.touchStart, this);\n        this.node.on(NodeEventType.TOUCH_MOVE, this.touchStart, this);\n        this.node.on(NodeEventType.TOUCH_END, this.touchStart, this);\n    }\n\n    public touchMove(event) {\n        console.log(event);\n        this.node.setPosition(new Vec3())\n\n    }\n\n    public touchEnd(event) {\n        this.node.on(NodeEventType.TOUCH_START, this.touchStart, this);\n        this.node.off(NodeEventType.TOUCH_CANCEL, this.touchStart, this);\n        this.node.off(NodeEventType.TOUCH_MOVE, this.touchStart, this);\n        this.node.off(NodeEventType.TOUCH_END, this.touchStart, this);\n    }\n\n    public touchCancel(event) {\n        this.node.on(NodeEventType.TOUCH_START, this.touchStart, this);\n        this.node.off(NodeEventType.TOUCH_CANCEL, this.touchStart, this);\n        this.node.off(NodeEventType.TOUCH_MOVE, this.touchStart, this);\n        this.node.off(NodeEventType.TOUCH_END, this.touchStart, this);\n    }\n\n    update(deltaTime: number) {\n\n    }\n}\n\n"]}