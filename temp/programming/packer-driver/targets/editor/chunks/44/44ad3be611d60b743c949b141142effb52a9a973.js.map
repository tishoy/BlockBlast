{"version":3,"sources":["file:///Users/hanchuang/Games/RotateBlock/assets/src/GameController.ts"],"names":["GameController","GameArea","Block","constructor","currentBlock","blockUsing","gameArea","instance","console","log","Instance","test","pos","block","getComponent","testBlock","add","index","addBlock","use","Index","allUsed","i","length","dispatchEvent","Event"],"mappings":";;;gGAIaA,c;;;;;;;;;;;;;;;;;;;;AAHJC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,K,iBAAAA,K;;;;;;;;;gCAEIF,c,GAAN,MAAMA,cAAN,CAAqB;AACxBG,QAAAA,WAAW,GAAG;AAAA,eAePC,YAfO;AAAA,eAiBPC,UAjBO,GAiBM,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAjBN;AAAA,eAmBdC,QAnBc;;AACV,cAAIN,cAAc,CAACO,QAAf,IAA2B,IAA/B,EAAqC;AACjCC,YAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACH;AACJ;;AAIyB,mBAARC,QAAQ,GAAG;AACzB,cAAI,KAAKH,QAAL,IAAiB,IAArB,EAA2B;AACvB,iBAAKA,QAAL,GAAgB,IAAIP,cAAJ,EAAhB;AACH;;AACD,iBAAOA,cAAc,CAACO,QAAtB;AACH;;AAQMI,QAAAA,IAAI,CAACC,GAAD,EAAMC,KAAN,EAAa;AACpB,iBAAO,KAAKP,QAAL,CAAcQ,YAAd;AAAA;AAAA,oCAAqCC,SAArC,CAA+CH,GAA/C,EAAoDC,KAApD,CAAP;AACH;;AAEMG,QAAAA,GAAG,CAACC,KAAD,EAAQJ,KAAR,EAAe;AACrB,eAAKP,QAAL,CAAcQ,YAAd;AAAA;AAAA,oCAAqCI,QAArC,CAA8CD,KAA9C,EAAqDJ,KAArD;AACA,eAAKT,YAAL,CAAkBU,YAAlB;AAAA;AAAA,8BAAsCK,GAAtC;AACA,eAAKd,UAAL,CAAgB,KAAKD,YAAL,CAAkBU,YAAlB;AAAA;AAAA,8BAAsCM,KAAtD,IAA+D,CAA/D;AACAZ,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKL,YAAL,CAAkBU,YAAlB;AAAA;AAAA,8BAAsCM,KAAlD;AACA,cAAIC,OAAO,GAAG,IAAd;AACAb,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;;AACA,eAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKjB,UAAL,CAAgBkB,MAApC,EAA4CD,CAAC,EAA7C,EAAiD;AAC7Cd,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAKJ,UAAL,CAAgBiB,CAAhB,CAAZ;;AACA,gBAAI,KAAKjB,UAAL,CAAgBiB,CAAhB,KAAsB,CAA1B,EAA6B;AACzBD,cAAAA,OAAO,GAAG,KAAV;AACA;AACH;AACJ;;AACDb,UAAAA,OAAO,CAACC,GAAR,CAAYY,OAAZ;;AACA,cAAIA,OAAJ,EAAa;AAETG,YAAAA,aAAa,CAAC,IAAIC,KAAJ,CAAU,YAAV,CAAD,CAAb;AACH;AACJ;;AA7CuB,O;;AAAfzB,MAAAA,c,CAOMO,Q,GAA2B,I","sourcesContent":["import { Node } from 'cc';\nimport { GameArea } from './GameArea';\nimport { Block } from './Block';\n\nexport class GameController {\n    constructor() {\n        if (GameController.instance != null) {\n            console.log(\"singlon instance error\")\n        }\n    }\n\n    private static instance: GameController = null;\n\n    public static get Instance() {\n        if (this.instance == null) {\n            this.instance = new GameController();\n        }\n        return GameController.instance;\n    }\n\n    public currentBlock;\n\n    public blockUsing = [0, 0, 0];\n\n    gameArea: Node;\n\n    public test(pos, block) {\n        return this.gameArea.getComponent(GameArea).testBlock(pos, block);\n    }\n\n    public add(index, block) {\n        this.gameArea.getComponent(GameArea).addBlock(index, block);\n        this.currentBlock.getComponent(Block).use();\n        this.blockUsing[this.currentBlock.getComponent(Block).Index] = 1;\n        console.log(this.currentBlock.getComponent(Block).Index);\n        let allUsed = true;\n        console.log(\"123\");\n        for (let i = 0; i < this.blockUsing.length; i++) {\n            console.log(this.blockUsing[i]);\n            if (this.blockUsing[i] == 0) {\n                allUsed = false;\n                break;\n            }\n        }\n        console.log(allUsed);\n        if (allUsed) {\n\n            dispatchEvent(new Event(\"resetBlock\"));\n        }\n    }\n\n}"]}